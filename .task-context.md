# Phase 2: Backend Core Entities - Task Context

## Objective
Create all backend domain entities for the workflow automation platform in the WorkflowAutomation.Core project.

## Project Location
- Backend root: `/home/jaime/projects/jimyy/backend`
- Core project: `/home/jaime/projects/jimyy/backend/WorkflowAutomation.Core`
- Dev guide: `/home/jaime/projects/jimyy/docs/devguide/devguide.md` (lines 162-503)

## Required Entities and Classes

### Entity Files to Create

1. **User.cs** - User entity with authentication properties
   - Id (Guid)
   - Email (string)
   - PasswordHash (string)
   - FirstName, LastName (string)
   - CreatedAt, UpdatedAt (DateTime)
   - IsActive (bool)
   - Role (UserRole enum: Admin, Developer, Viewer)

2. **Workflow.cs** - Main workflow entity (see devguide.md lines 164-210)
   - All properties as specified in the dev guide
   - Includes WorkflowEnvironment enum (Testing, Launched, Production)

3. **WorkflowDefinition.cs** - Workflow structure class (see devguide.md lines 219-224)
   - Nodes (List<Node>)
   - Connections (List<Connection>)
   - Variables (Dictionary<string, object>)

4. **Node.cs** - Node class with parameters and settings (see devguide.md lines 226-238)
   - Id, Type, Name, Position
   - Parameters (Dictionary<string, object>)
   - Credentials, Style, Notes, Disabled
   - RetrySettings

5. **NodeStyle.cs** and **RetrySettings.cs** (see devguide.md lines 240-254)

6. **Connection.cs** - Connection between nodes (see devguide.md lines 256-263)
   - SourceNodeId, TargetNodeId
   - SourceOutput, TargetInput
   - ConnectionType enum (Main, Error, Success, Conditional)

7. **Position.cs** - Position class (see devguide.md lines 273-277)

8. **WorkflowSettings.cs** - Workflow settings (see devguide.md lines 279-287)
   - ExecutionMode enum (Sequential, Parallel, Smart)

9. **WorkflowExecution.cs** - Execution tracking entity (see devguide.md lines 300-335)
   - ExecutionStatus enum (Waiting, Running, Success, Error, Canceled, PartialSuccess)

10. **NodeExecution.cs** - Individual node execution (see devguide.md lines 347-365)

11. **ExecutionLog.cs** - Execution logs (see devguide.md lines 367-377)
    - LogLevel enum (Debug, Info, Warning, Error, Critical)

12. **Credential.cs** - Encrypted credentials (see devguide.md lines 393-410)

13. **WorkflowVersion.cs** - Version history tracking
    - Id (Guid)
    - WorkflowId (Guid)
    - Version (int)
    - WorkflowData (string - JSON)
    - CreatedAt (DateTime)
    - CreatedBy (Guid)
    - ChangeNotes (string)
    - Navigation: Workflow, Creator

14. **AIConfiguration.cs** - AI provider configuration (see devguide.md lines 415-437)
    - AIModelCapabilities class included

15. **CollaborationSession.cs** - Real-time collaboration (see devguide.md lines 450-470)

16. **CollaboratorInfo.cs** and **WorkflowChange.cs** (see devguide.md lines 471-491)
    - ChangeType enum (NodeAdded, NodeRemoved, NodeMoved, NodeUpdated, ConnectionAdded, ConnectionRemoved, ParameterChanged)

## Folder Structure to Create

```
WorkflowAutomation.Core/
├── Entities/
│   ├── User.cs
│   ├── Workflow.cs
│   ├── WorkflowVersion.cs
│   ├── WorkflowExecution.cs
│   ├── NodeExecution.cs
│   ├── ExecutionLog.cs
│   ├── Credential.cs
│   ├── AIConfiguration.cs
│   └── CollaborationSession.cs
├── Models/
│   ├── WorkflowDefinition.cs
│   ├── Node.cs
│   ├── NodeStyle.cs
│   ├── RetrySettings.cs
│   ├── Connection.cs
│   ├── Position.cs
│   ├── WorkflowSettings.cs
│   ├── AIModelCapabilities.cs
│   ├── CollaboratorInfo.cs
│   └── WorkflowChange.cs
└── Enums/
    ├── UserRole.cs
    ├── WorkflowEnvironment.cs
    ├── ExecutionMode.cs
    ├── ExecutionStatus.cs
    ├── ConnectionType.cs
    ├── LogLevel.cs
    └── ChangeType.cs
```

## Requirements

1. All entities should be in the `WorkflowAutomation.Core.Entities` namespace
2. All models should be in the `WorkflowAutomation.Core.Models` namespace
3. All enums should be in the `WorkflowAutomation.Core.Enums` namespace
4. Follow C# naming conventions and best practices
5. Include appropriate using statements
6. Use nullable reference types where appropriate (e.g., `string?` for optional fields)
7. Use virtual keyword for navigation properties (EF Core requirement)
8. Ensure all code compiles without errors

## Task Execution Steps

1. Delete the placeholder Class1.cs file
2. Create the folder structure (Entities, Models, Enums)
3. Create all enum files first
4. Create all model classes (non-entity classes)
5. Create all entity classes
6. Verify the project compiles successfully
7. Report completion with file count and any issues

## Success Criteria

- All 16 entities/classes created
- All 7 enums defined
- Project compiles without errors or warnings
- Code follows the specifications in the dev guide exactly
